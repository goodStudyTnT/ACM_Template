网络流24题建图总结
1. 太空飞行计划问题(最大权闭合子图)
题意:N个实验，每个实验有奖金，M个仪器，仪器需要钱买，每个实验需要若干个仪器，仪器可以共用，问如何能获得最大收益。
建图:s连实验，容量为奖金，实验连需要的仪器，容量为inf，仪器连t，容量为需要的花费。
答案即为总奖金-最大流。方案为最后属于s的实验和仪器都为需要的。
2. 魔术球问题(二分图最小路径覆盖)
题意:n个柱子，需要往里面放入编号为1，2，3。。的球。每次只能放最上面且任何相邻的球编号和为完全平方数。
建图:枚举个数，将与当前相加为完全平方数的数连起来，跑二分图匹配。即求最小路径覆盖即可。
3. 最长不下降子序列问题
题意:给定长度为n的序列(1)求LIS(s)(2)求最多可取多少个长度为s的不下降子序列(3)在能多次用x1和xn下最多可取多少个长度为s的不下降子序列。
建图:问题1用n^2求出每个dp[i]代表以i结尾的LIS。问题2将每个点拆成两个i_a,和i_b，i_a连向i_b，容量为1.s连向dp=1的点，容量也为1.每个点的i_b连向在它左边且dp值等于它的减1的j_a.dp值为s的连向t，容量为1.问题3:将s连向1的容量改为inf.1_a连向1_b的改成inf。同理当dp[n]为s时也这样改。
4. 航空路线问题
题意:给定起点终点和路径。求从起点到终点并从终点到起点经过点最多的路径，每个点只能经过1次。
建图:还是拆点i_a,和i_b，i_a连i_b。1和n的容量为2，其他容量为1.并且费用为1.如果有连边，则i_b连向j_a。容量为1，费用为1
5. 家园
题意:现在有k个人在地球，要把他们送到月球去。用n个太空站，m艘太空船，太空站可以容纳无限多的人，而太空船可容纳H[i]人。太空船周期性的停靠在一系列太空站。例如(1,3,4)就是太空船周期性停在134134134..,每次耗时1，初始人都在地球，船都在初始站。问多久能让所有人都到月球去。
建图:每一秒建一系列节点，那么能够按照太空船上一秒所在的节点与现在所在的节点建一条边，容量为H[i],s连向新建的地球，容量为inf。月球就是t。当最大流大于k，则结束。
6. 负载平衡问题
题意:环形排列，货物数量不等，如何最小次数使得n个仓库的库存数量相同。
建图:大于平均数的连s,其他连t，容量为各自与平均值差的绝对值，费用为0.与左右两边，容量inf，费用为1.
7. 深海机器人问题
题意:P*Q的矩阵，有n个机器人，每个机器人只能向北向东移动。有些点上有价值，但只能被采集一次。问采集的最大价值是多少。
建图:对于方格中的每个点，拆成两个点，分别为入点和出点。入点和出点之间连两条边，一条容量为1，费用为点的权值，表示每个点的数只可以取一次；另一条容量为inf，费用为0，仅表示可以经过无数次；
8. 最长k可重区间集问题。
题意:n个开区间，一个整数k，选出一个开区间集合，要求直线上的每个点不能被包含k次，且集合中的区间的长度和最大。
建图:
方法1:所有点向下一个点连容量为k费用为0的边，l和r连容量为1费用为区间长度的边。
方法2:以左端点为第一关键字，右端点为第二关键字，排序，每个区间拆成两个点i_a,i_b。i_a到i_b连流量为1，费用为长度的边。如果区间i和j相交，那么i_b连j_a流量为1费用0的边。S连i_a流量1费用0的边i_b连t流量1费用0的边。Ss连S流量k费用0的边。
上下界网络流
1.无源汇有上下界最大流
题意: 给n个点，及m根pipe，每根pipe用来流躺液体的，单向的，每时每刻每根pipe流进来的物质要等于流出去的物质，要使得m条pipe组成一个循环体，里面流躺物质。并且满足每根pipe一定的流量限制，范围为[Li,Ri].即要满足每时刻流进来的不能超过Ri(最大流问题)，同时最小不能低于Li。
建图: 以前写的最大流默认的下界为0，而这里的下界却不为0，所以我们要进行再构造让每条边的下界为0，这样做是为了方便处理。对于每根管子有一个上界容量up和一个下界容量low，我们让这根管子的容量下界变为0，上界为up-low。可是这样做了的话流量就不守恒了，为了再次满足流量守恒，即每个节点"入流=出流”，我们增设一个超级源点st和一个超级终点sd。我们开设一个数组du[]来记录每个节点的流量情况。
du[i]=in[i]（i节点所有入流下界之和）-out[i]（i节点所有出流下界之和）。
当du[i]大于0的时候，st到i连一条流量为du[i]的边。
当du[i]小于0的时候，i到sd连一条流量为-du[i]的边。
最后对（st，sd）求一次最大流即可，当所有附加边全部满流时（即maxflow==所有du[]>0之和），有可行解。最后边的流量等于流量+下界。
2. 有源汇有上下界最大流
题意:一个屌丝给m个女神拍照，计划拍照n天，每一天屌丝最多给C个女神拍照，每天拍照不能超过D张，而且给每个女神i拍照有数量限制[L_i,R_i],对于每个女神n天的拍照总和不能超过G_i，如果有解求屌丝最多能拍多少张照片，并求每天给对应女神拍多少张照片，否则输出-1.
解题思路: 增设一源点st，汇点sd，st到第i天连一条上界为Di下界为0的边，每个女神到汇点连一条下界为Gi上界为oo的边，对于每一天，当天到第i个女孩连一条[Li，Ri]的边。
建图模型：源点s，终点d。超级源点ss，超级终点dd。首先判断是否存在满足所有边上下界的可行流，方法可以转化成无源汇有上下界的可行流问题。怎么转换呢？
增设一条从d到s没有下界容量为无穷的边，那么原图就变成了一个无源汇的循环流图。接下来的事情一样，超级源点ss连i（du[i]>0），i连超级汇点（du[i]<0）,

对（ss，dd）进行一次最大流，当maxflow等于所有(du[]>0)之和时，有可行流，否则没有。
当有可行流时，删除超级源点ss和超级终点dd，再对（s，d）进行一次最大流，此时得到的maxflow则为题目的解。为什么呢？因为第一次maxflow（）只是求得所有满足下界的流量，而残留网络（s，d）路上还有许多自由流（没有和超级源点和超级汇点连接的边）没有流满，所有最终得到的maxflow=（第一次流满下界的流+第二次能流通的自由流）。最后的边的流量等于残余网络的流量+下界。
3. 有源汇上下界最小流
(不懂)设源和汇为s和t，我们先创建超级源点ss和超级汇点tt，按照无源汇上下界那样建图，跑最大流。然后连上t到s流量为inf的边，再跑最大流。答案即为边s到t的残量网络，最后边的答案为流量+下界。
